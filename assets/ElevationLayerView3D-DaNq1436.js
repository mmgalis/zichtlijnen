import{a4 as u,aC as f,aD as g,av as m,aE as d,aw as p,a7 as v,aF as w,e as n,y as h,a as D}from"./index-2x4JY06U.js";import{l as $}from"./LayerView3D-M1UbMu_z.js";import{p as T}from"./TiledLayerView3D-CcwEItAz.js";import{y as _}from"./LayerView-DvlHVGG6.js";let s=class extends T($(_)){constructor(){super(...arguments),this.type="elevation-3d"}get tileInfo(){return this.layer.tileInfo}initialize(){var a,o,c;const e=this.view,t=(a=e.map)==null?void 0:a.allLayers,i=t&&t.includes(this.layer),r=(c=(o=e.map)==null?void 0:o.ground)==null?void 0:c.layers,l=r&&r.includes(this.layer);if(i&&!l){const y=new u("layerview:elevation-layer-only",`3D elevation layer '${this.layer.id}' can only be added to layers in map.ground`);this.addResolvingPromise(Promise.reject(y))}this._lercDecoder=f(e.resourceController),this._addTilingSchemeMatchPromise()}destroy(){this._lercDecoder=g(this._lercDecoder)}async fetchTile(e,t){const i=this.layer;if(m(i)){const o=await i.fetchTile(e[0],e[1],e[2],{noDataValue:d,signal:t.signal});return p(t)?void v.getLogger(this).warnOnce("A call to fetchTile resolved even though the request was aborted. fetchTile should not resolve if options.signal.aborted is true."):o}const r=this.getTileUrl(e),l=await t.requester.request(r,"binary",t),a=await this._lercDecoder.decode(l,{noDataValue:d},t.signal);if(a)return new w(a);throw new Error("LERC decoding failed")}};n([h()],s.prototype,"layer",void 0),n([h()],s.prototype,"tileInfo",null),s=n([D("esri.views.3d.layers.ElevationLayerView3D")],s);const C=s;export{C as default};
